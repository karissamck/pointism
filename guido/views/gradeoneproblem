%include gradeheader title='grading the problem', past_comments=past_comments

<div class="gradingContainer">
  <!-- left -->
  <div class="student">
  <div class="code"><div class="linenumbers">{{linenumbers}}</div>{{source}}</div>
    <form method="GET" action="/guido/codesearch/">
    <input type="hidden" name="student" value="{{student}}"/>
    <input type="hidden" name="assignment" value="{{assignment}}"/>
    <input name="query" type="textbox" /> 
    <button id="searchbutton">Search code</button>
    </form>
  </div>

  <!-- right -->
<div class="gradingWrapper">
  <div class="grading">
    <div class="code">{{autograder}}</div>
    <form method="POST" action="" autocomplete="off">
      <ol id="grade">
      % for grade in grades:
      	% if default_grade == grade:
	       <li class="ui-state-default" value="{{default_grade}}">{{default_grade}}</li>
	% else:
	       <li class="ui-state-default" value="{{grade}}">{{grade}}</li>
	% end
      % end
      </ol>
      <br/>
      <br/>
      <br/>
      <textarea id="comment" name="comment" cols="60"></textarea>
      <input type="hidden" id="submit_grade" name="grade" value="None" />
      <input type="submit" name="usenew" value="Grade" />
      <br/>
      <p style="margin-bottom:0">Previously used comments:</p>

      <select name="prevcomments" class="prevcomments" size="3">
      % for comment in prevcomments:
        <option value="{{past_comments[comment.commentid]}}">{{comment.firstline}}</option>
      % end
      </select>

      <br/>
      <input  type="submit" name="useprevious"
             value="grade with selected comment"/>
      <input  type="submit" name="editcomment"
             value="edit selected comment"/>
    </form>
      <p style="margin-bottom:0">Exisiting comments on this</p>
      <div class="existingcomment">
      % if existingcomments == [] or existingcomments == None:
        (none yet)
      % else:
         % for comment in existingcomments:
           {{comment}}<br>
         % end	    
      %end
      </div>	
<br /><br>
    <table width="300" border="0">
    <tr>
    Navigation:
    % if prevstudent != None:
    <button id="prevstudentbutton" onclick="window.location='/grade/{{assignment}}/{{problem}}/{{prevstudent}}';">Previous</button>
    % end
    % if nextstudent != None:
    <button id="nextstudentbutton" onclick="window.location='/grade/{{assignment}}/{{problem}}/{{nextstudent}}';">Next</button>
    % end
    <br>
    </tr>
    <tr>
    Change:
    <a href="/specific_problem">assignment</a>
    <a href="/specific_problem/{{assignment}}" >problem</a> 

    </tr>
    </table>
  </div>
</div>
</div>
  <br/>

%include footer