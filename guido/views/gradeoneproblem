%include gradeheader title='grading the problem', past_comments=past_comments
<div id="bigContainer">
  <!-- left -->
  <div class="student">
      <h4 class="section-title roundTop">{{assignment}} :: Problem {{problem}} :: {{student}}</h4>
    <iframe id="studentframe" src="/solutionframe/{{assignment}}/{{problem}}/{{student}}"></iframe>
<div id="tools">
    <form method="GET" action="/guido/codesearch/">
    <input type="hidden" id="student" name="student" value="{{student}}"/>
    <input type="hidden" id="problem" name="problem" value="{{problem}}"/>
    <input type="hidden" id="assignment" name="assignment" value="{{assignment}}"/>
    <input name="query" type="textbox" /> 
    <button id="searchbutton">Search code</button>
    </form>
</div>

    <div class="reportcomments">
      <br/>
      <h4 class="section-title roundTop">Comments Already Attached</h4>
      <div class="existingcomment roundBottom">
      % if existingcomments == [] or existingcomments == None:
        (none yet)
      % else:
         % for comment in existingcomments:
           {{comment}}<br><br>
         % end	    
      %end
      </div>	
    </div>

  </div>

  <!-- right -->
  <div class="gradingWrapper">
    <div class="autograder roundTop">
    <h4 class="section-title roundTop">Autograder Report</h4>
      <div class="code roundBottom">
     %if autograder=='' or autograder==None:
       No output.
     %else:
       {{autograder}}
     %end
      </div>
    </div>

  <div class="grading roundTop roundBottom">
    <div class="grading_header"> <h4 class="section-title roundTop">Grading</h4> </div>
    <div class="grading_content">
    <form id="formGrade" method="POST" action="" autocomplete="off">
      <ol id="grade">
      % for grade in grades:
      	% if default_grade == grade:
	       <li class="ui-selected ui-state-default" value="{{default_grade}}">{{default_grade}}</li>
	% else:
	       <li class="ui-state-default" value="{{grade}}">{{grade}}</li>
	% end
      % end
      </ol>
      <br clear="all">
      <textarea id="comment" name="comment" cols=100 rows=4></textarea>
      <input type="hidden" id="submit_grade" name="grade" value="None" />
      <input type="hidden" id="submit_code" name="code" value="None" />
      <button id="gradebutton">Grade</button>
      <div class="options">
      <input type="checkbox" id="chkNext" name="chkNext" /><label for="chkNext">Automatically Advance</label>
      <input type="hidden" id="nextstudent" name="nextstudent" value="{{nextstudent}}"/>        
      </div>
      </form>
    </div>
   </div>
   <div class="grading roundTop roundBottom">
    <div class="grading_header"> <h4 class="section-title roundTop">Comment Database</h4> </div>
     <div class="grading_content">
      <form method="POST" id="formCommentdb" action="" autocomplete="off">	
      <div id="divprevcomments">
      <select id="prevcomments" name="prevcomments" class="prevcomments" size="3">
      % for comment in prevcomments:
        <option value="{{comment.commentid}}">{{comment.firstline}}</option>
      % end
      </select>
      </div>
      %include dialog
      <input type="hidden" id="editedcomment" name="editedcomment" value="None" />
      <input type="submit" name="useprevious" value="grade with selected comment"/>
      <button id="btnEditcomment"> edit selected comment</button>
      <br> <div id="commentdbstatus"></div>
    </form>
   </div>
</div>
<!-- begin navigation -->
<ul class="nav_container">
    <li>
    <h3 class="roundTop section-title">Pick a Student</h3>
    <div class="roundBottom nav_section">
    <ul class="nav">
    % if prevstudent != None:
    <button id="prevstudentbutton" onclick="window.location='/grade/{{assignment}}/{{problem}}/{{prevstudent}}';">Previous</button>
    % end
    % if nextstudent != None:
    <button id="nextstudentbutton" onclick="window.location='/grade/{{assignment}}/{{problem}}/{{nextstudent}}';">Next</button>
    % end
      </ul>
    </div>
   </li>
    <li>
    <h3 class="roundTop section-title">Select Different</h3>
    <div class="roundBottom nav_section">
    <ul class="nav">
    <button onclick="window.location='/specific_problem';">assignment</button>
    <button onclick="window.location='/specific_problem/{{assignment}}';">problem</button>
      </ul>   
     </div>
   </li>
</ul>
</div>
</div>

</div>
